services:
  pi-monitor:
    build: .
    container_name: pi-monitor-bot
    restart: unless-stopped
    environment:
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - ALLOWED_USERS=${ALLOWED_USERS}
      - TZ=Asia/Ho_Chi_Minh
      # Alert settings
      - ALERT_ENABLED=${ALERT_ENABLED:-false}
      - ALERT_INTERVAL=${ALERT_INTERVAL:-30}
      - ALERT_CPU_TEMP=${ALERT_CPU_TEMP:-70}
      - ALERT_CPU_USAGE=${ALERT_CPU_USAGE:-90}
      - ALERT_MEMORY=${ALERT_MEMORY:-85}
      - ALERT_DISK=${ALERT_DISK:-90}
      # Wake-on-LAN settings
      - WOL_MAC_ADDRESS=${WOL_MAC_ADDRESS}
      - WOL_HOST=${WOL_HOST}
      - WOL_BROADCAST=${WOL_BROADCAST:-255.255.255.255:9}
    volumes:
      # Mount host system info for monitoring
      - /proc:/host/proc:ro
      - /sys:/host/sys:ro
      - /:/host/rootfs:ro
    # Required for reading host system info
    privileged: true
